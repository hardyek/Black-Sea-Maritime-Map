<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport"
        content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="static/css/black.css">
        <script src="static/scripts.js"></script>
        <title>Black Sea Map</title>

        <!-- Leaflet JS -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
        <style>
            body {
                margin: 0;
                padding: 0;
            }
            #map {
                position: absolute;
                top: 0;
                bottom: 0;
                width: 100%;
            }
        </style>

    </head>
    <body>
        <div id="map"></div>

        <!-- Leaflet JS -->
        <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
        
        <iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://www.openstreetmap.org/export/embed.html?bbox=26.092529296875004%2C40.88029480552824%2C41.91284179687501%2C46.73986059969267&amp;layer=mapnik" style="border: 1px solid black"></iframe><br/><small><a href="https://www.openstreetmap.org/#map=7/43.882/34.003">View Larger Map</a></small>
        <script>
            var map = L.map('map').setView([43.926723, 34.248584], 7); // Set the initial center and zoom level
        
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);
        
            // Function to create custom ship icon with rotation and moving indicator
            function createShipIcon(rotationAngle, isMoving) {
                var iconHtml = '';
        
                iconHtml = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" ' +
                            'style="transform: rotate(' + rotationAngle + 'deg);">' +
                            '<path fill="blue" d="M12 2L2 22h20L12 2zm0 16h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V8h2v2z"/>' +
                            '</svg>';
        
                return L.divIcon({
                    className: 'custom-ship-icon',
                    html: iconHtml,
                    iconSize: [24, 24],
                });
            }
        
            // Example AIS data with rotation angles and moving indicators - replace this with your actual data
            var aisData = [
                { name: 'Ship 1', lat: 37.7749, lon: -122.4194, rotation: 45, isMoving: 0 },
                { name: 'Ship 2', lat: 40.7128, lon: -74.0060, rotation: 135, isMoving: 1 },
                // Add more data points as needed
            ];
        
            // Add AIS data markers to the map with rotation angles and moving indicators
            aisData.forEach(function (ship) {
                var markerOptions = { icon: createShipIcon(ship.rotation, ship.isMoving) };
                if (ship.isMoving === 0) {
                    markerOptions.opacity = 0.5;
                }
                L.marker([ship.lat, ship.lon], markerOptions).addTo(map).bindPopup(ship.name);
            });
        </script>
    </body>
</html>